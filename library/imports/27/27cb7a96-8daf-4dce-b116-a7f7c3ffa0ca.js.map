{"version":3,"sources":["../../../../assets/Script/assets/Script/movepicture.js"],"names":["cc","Class","extends","Component","properties","p1","Node","p2","p3","p4","AudioClip","onLoad","a","b","aniFlag","fangfa","event","delta","touch","getDelta","x","y","node","on","EventType","TOUCH_MOVE","setpicture","self","fangfa2","p1Box","getBoundingBox","p2Box","p3Box","p4Box","Intersection","rectRect","setPosition","TOUCH_END","update","dt","off","donghua","getComponent","Animation","play","window","audioID1","audioEngine","bgmusic"],"mappings":"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","file":"movepicture.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        p1: cc.Node,//图片节点\n        p2: cc.Node,//碰撞节点\n        p3: cc.Node,//图片节点\n        p4: cc.Node,//碰撞节点\n        p4: cc.Node,\n        donghua: cc.Node,\n        zhezhao: cc.Node,\n        bgmusic: cc.AudioClip,\n    },\n\n\n    onLoad: function () {\n        //按住图片拖动图片移动\n        this.a = false;\n        this.b = false;\n        this.aniFlag = false;\n        this.fangfa = function (event) {\n            var delta = event.touch.getDelta();\n            this.x += delta.x;\n            this.y += delta.y;\n        };\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.fangfa);\n        this.setpicture();\n\n    },\n    setpicture: function () {\n        var self = this;\n        this.fangfa2 = function (event) {\n            var p1Box = self.p1.getBoundingBox();\n            var p2Box = self.p2.getBoundingBox();\n            var p3Box = self.p3.getBoundingBox();\n            var p4Box = self.p4.getBoundingBox();\n            if (cc.Intersection.rectRect(p1Box, p2Box)) {\n                self.p1.setPosition(110, 120);\n            }\n            if (cc.Intersection.rectRect(p3Box, p4Box)) {\n                self.p3.setPosition(110, -99);\n            }\n        };\n        //拖动图片进行拼然后在某一范围会吸附\n        this.node.on(cc.Node.EventType.TOUCH_END, this.fangfa2, this);\n    },\n    update: function (dt) {\n        if (this.p1.x == 110 && this.p1.y == 120) {\n            this.a = true;\n        }\n        if (this.p3.x == 110 && this.p3.y == -99) {\n            this.b = true;\n        }\n        if (this.a == true && this.b == true) {\n            this.node.off(cc.Node.EventType.TOUCH_MOVE, this.fangfa);\n            if (this.aniFlag == false) {\n                this.donghua.getComponent(cc.Animation).play();\n                window.audioID1 = cc.audioEngine.play(this.bgmusic,false, 1);\n                this.aniFlag = true;\n            }\n            this.node.off(cc.Node.EventType.TOUCH_END, this.fangfa2, this);\n        }\n    }\n});\n"]}